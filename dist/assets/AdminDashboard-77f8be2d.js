import{u as V,j as e}from"./index-12e734f0.js";import{r as o,u as z}from"./vendor-f2a9e80b.js";import{s as B,c as O,e as v,u as J,d as Z,f as Y,g as G,h as K,i as Q,j as X}from"./index-ff4cc8bf.js";import{c as d,I as ee,S as te,M as se,_ as l}from"./sun-ab41fa77.js";import"./firebase-141d664e.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=d("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=d("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=d("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=d("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=d("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);v.init("9sf1untPPvbg0U1P9");const oe="service_mzam0ga",ce="template_5uv23ip",S={title:"",content:"",imageUrl:""};function ge(){const[h,E]=o.useState([]),[C,D]=o.useState([]),[i,m]=o.useState(S),[u,w]=o.useState(null),[g,y]=o.useState(""),[F,p]=o.useState(null),b=z(),{isAuthenticated:N,logout:T,isDark:r,toggleTheme:$}=V();o.useEffect(()=>{if(!N){b("/admin");return}const t=B(a=>{D(a)}),s=O(a=>{E(a)});return()=>{t&&t(),s&&s()}},[N,b]);const M=async t=>{try{const s=localStorage.getItem("waitlist"),a=s?JSON.parse(s):[];if(!Array.isArray(a)){l.error("Invalid waitlist data");return}let c=0;const U=a.length;for(const f of a){const n=typeof f=="string"?f:f.email;try{const x={to_email:n,recipient:n,from_name:"TagFlow Team",to_name:n.split("@")[0],subject:"New Update from TagFlow!",update_title:t.title,update_content:t.content,update_image:t.image_url||"",update_date:new Date().toLocaleDateString(),action_url:window.location.origin,email_to:n,message:`
              We've just posted a new update that we think you'll be interested in!
              
              ${t.title}
              
              ${t.content}
              
              Visit our website to read more and join the discussion.
            `};console.log("Sending notification to:",n,x);const _=await v.send("service_mzam0ga","template_5uv23ip",x);if(_.status===200)c++,console.log(`Email sent successfully to ${n}`);else throw new Error(`Failed to send email: ${_.text}`)}catch(x){console.error(`Failed to send email to ${n}:`,x)}}c===U?l.success("All notification emails sent successfully!"):c>0?l.success(`Sent ${c} out of ${U} notification emails`):l.error("Failed to send notification emails")}catch(s){console.error("Error sending notification emails:",s),l.error("Failed to send notification emails")}},I=async t=>{if(t.preventDefault(),!i.title.trim()||!i.content.trim()){l.error("Please fill in all required fields");return}try{const s={id:u||Date.now().toString(),title:i.title,content:i.content,image_url:i.imageUrl||"",created_at:new Date().toISOString(),comments:[]};u?(await J(u,s),l.success("Update modified successfully!")):await Z(s)&&(l.success("Update posted successfully!"),await M(s)),m(S),w(null)}catch(s){console.error("Error handling update:",s),l.error("Failed to save update")}},L=t=>{w(t.id),m({title:t.title,content:t.content,imageUrl:t.image_url})},A=async t=>{try{await Y(t),l.success("Update deleted successfully!")}catch(s){console.error("Error deleting update:",s),l.error("Failed to delete update")}},R=async t=>{try{await G(t),l.success("User deleted successfully!")}catch(s){console.error("Error deleting user:",s),l.error("Failed to delete user")}},P=()=>{T(),b("/admin")},W=async t=>{try{const s={to_email:t,recipient:t,from_name:"TagFlow Team",to_name:t.split("@")[0],subject:"Welcome to TagFlow Waitlist!",email_to:t,message:`
          Thank you for joining our waitlist! 
          We're excited to have you on board and will keep you updated on our progress.
          
          You can provide feedback anytime by visiting our website.
          
          Best regards,
          The TagFlow Team
        `};console.log("Sending welcome email to:",t,s);const a=await v.send(oe,ce,s);if(a.status===200)l.success("Welcome email sent successfully!");else throw new Error(`Failed to send email: ${a.text}`)}catch(s){console.error("Error sending welcome email:",s),l.error("Failed to send welcome email. Please check your EmailJS configuration.")}},k=async(t,s)=>{try{await K(t,s),l.success("Feedback saved successfully!")}catch(a){console.error("Error saving feedback:",a),l.error("Failed to save feedback")}},q=async(t,s)=>{try{await Q(t,s),l.success("Comment deleted successfully!")}catch(a){console.error("Error deleting comment:",a),l.error("Failed to delete comment")}},H=async(t,s)=>{if(!g.trim()){l.error("Reply cannot be empty");return}try{await X(t,s,g.trim()),y(""),p(null),l.success("Reply added successfully!")}catch(a){console.error("Error adding reply:",a),l.error("Failed to add reply")}};return e.jsxs("div",{className:`min-h-screen ${r?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx(ee,{position:"top-right"}),e.jsx("nav",{className:`${r?"bg-gray-800":"bg-white"} shadow-sm`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:"Admin Dashboard"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:$,className:`p-2 rounded-full ${r?"bg-gray-700 text-yellow-400 hover:bg-gray-600":"bg-gray-100 text-gray-900 hover:bg-gray-200"} transition-colors duration-200`,"aria-label":"Toggle theme",children:r?e.jsx(te,{className:"h-5 w-5"}):e.jsx(se,{className:"h-5 w-5"})}),e.jsxs("button",{onClick:P,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md ${r?"text-gray-300 bg-gray-700 hover:bg-gray-600":"text-gray-700 bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:`${r?"bg-gray-800":"bg-white"} overflow-hidden shadow rounded-lg`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:`h-6 w-6 ${r?"text-blue-400":"text-blue-600"}`}),e.jsxs("h2",{className:`ml-3 text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:["Waitlist Users (",h.length,")"]})]}),e.jsx("button",{onClick:()=>W(h.map(t=>t.email).join(",")),className:`px-3 py-1 rounded-md ${r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-100 hover:bg-blue-200 text-blue-700"}`,children:"Send Welcome Emails"})]}),e.jsx("div",{className:"mt-6",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:h.map(t=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:t.email}),e.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:["Joined: ",new Date(t.joined_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>R(t.id),className:"text-red-600 hover:text-red-800",title:"Delete user",children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("textarea",{value:t.feedback||"",onChange:s=>{const a=s.target.value;k(t.email,a)},placeholder:"Enter feedback...",className:`w-full px-3 py-2 text-sm rounded-md ${r?"bg-gray-700 text-white placeholder-gray-400":"bg-gray-50 text-gray-900 placeholder-gray-500"} border border-gray-300 focus:ring-blue-500 focus:border-blue-500`,rows:2}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>k(t.email,t.feedback||""),className:`px-3 py-1 text-sm rounded-md transition-colors duration-200 ${r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-100 hover:bg-blue-200 text-blue-700"}`,children:"Save Feedback"})})]})]})},t.id))})})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"ml-3 text-lg font-medium text-gray-900",children:"Updates Management"})]}),e.jsx("form",{onSubmit:I,className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Update Title"}),e.jsx("input",{type:"text",id:"title",value:i.title,onChange:t=>m({...i,title:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{id:"content",value:i.content,onChange:t=>m({...i,content:t.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"Image URL (optional)"}),e.jsx("input",{type:"url",id:"imageUrl",value:i.imageUrl,onChange:t=>m({...i,imageUrl:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),e.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),u?"Update Post":"Post Update"]})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Updates"}),e.jsx("ul",{className:"mt-4 space-y-4",children:C.map(t=>{var s;return e.jsx("li",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t.content}),t.image_url&&e.jsx("img",{src:t.image_url,alt:t.title,className:"mt-2 rounded-lg max-h-40 object-cover"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"ml-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>L(t),className:"text-blue-600 hover:text-blue-800",title:"Edit update",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(t.id),className:"text-red-600 hover:text-red-800",title:"Delete update",children:e.jsx(j,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"User Comments"}),(s=t.comments)==null?void 0:s.map(a=>e.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:a.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["By: ",a.user_email," • ",new Date(a.created_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>q(t.id,a.id),className:"text-red-600 hover:text-red-800",title:"Delete comment",children:e.jsx(j,{className:"h-4 w-4"})})]}),a.admin_reply?e.jsxs("div",{className:"mt-2 pl-4 border-l-2 border-blue-200",children:[e.jsx("p",{className:"text-sm text-gray-700",children:a.admin_reply}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Admin Reply • ",new Date(a.admin_reply_at).toLocaleDateString()]})]}):e.jsx("div",{className:"mt-2",children:F===a.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:g,onChange:c=>y(c.target.value),placeholder:"Type your reply...",className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{onClick:()=>H(t.id,a.id),className:"px-3 py-1 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Reply"}),e.jsx("button",{onClick:()=>{p(null),y("")},className:"px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"})]}):e.jsx("button",{onClick:()=>p(a.id),className:"text-sm text-blue-600 hover:text-blue-800",children:"Reply to comment"})})]},a.id))]})]})},t.id)})})]})]})})]})})]})}export{ge as default};
//# sourceMappingURL=AdminDashboard-77f8be2d.js.map
